(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-be2d4a14"],{1148:function(e,t,i){"use strict";var n=i("da84"),r=i("5926"),a=i("577e"),o=i("1d80"),s=n.RangeError;e.exports=function(e){var t=a(o(this)),i="",n=r(e);if(n<0||n==1/0)throw s("Wrong number of repetitions");for(;n>0;(n>>>=1)&&(t+=t))1&n&&(i+=t);return i}},"4a59":function(e,t,i){"use strict";i("63ba")},"4aa5":function(e,t,i){},"51df":function(e,t,i){"use strict";i("b5f6")},"63ba":function(e,t,i){},a434:function(e,t,i){"use strict";var n=i("23e7"),r=i("da84"),a=i("23cb"),o=i("5926"),s=i("07fa"),c=i("7b0b"),l=i("65f0"),d=i("8418"),h=i("1dde"),u=h("splice"),f=r.TypeError,b=Math.max,O=Math.min,v=9007199254740991,m="Maximum allowed length exceeded";n({target:"Array",proto:!0,forced:!u},{splice:function(e,t){var i,n,r,h,u,p,g=c(this),y=s(g),j=a(e,y),w=arguments.length;if(0===w?i=n=0:1===w?(i=0,n=y-j):(i=w-2,n=O(b(o(t),0),y-j)),y+i-n>v)throw f(m);for(r=l(g,n),h=0;h<n;h++)u=j+h,u in g&&d(r,h,g[u]);if(r.length=n,i<n){for(h=j;h<y-n;h++)u=h+n,p=h+i,u in g?g[p]=g[u]:delete g[p];for(h=y;h>y-n+i;h--)delete g[h-1]}else if(i>n)for(h=y-n;h>j;h--)u=h+n-1,p=h+i-1,u in g?g[p]=g[u]:delete g[p];for(h=0;h<i;h++)g[h+j]=arguments[h+2];return g.length=y-n+i,r}})},b5f6:function(e,t,i){},b680:function(e,t,i){"use strict";var n=i("23e7"),r=i("da84"),a=i("e330"),o=i("5926"),s=i("408a"),c=i("1148"),l=i("d039"),d=r.RangeError,h=r.String,u=Math.floor,f=a(c),b=a("".slice),O=a(1..toFixed),v=function(e,t,i){return 0===t?i:t%2===1?v(e,t-1,i*e):v(e*e,t/2,i)},m=function(e){var t=0,i=e;while(i>=4096)t+=12,i/=4096;while(i>=2)t+=1,i/=2;return t},p=function(e,t,i){var n=-1,r=i;while(++n<6)r+=t*e[n],e[n]=r%1e7,r=u(r/1e7)},g=function(e,t){var i=6,n=0;while(--i>=0)n+=e[i],e[i]=u(n/t),n=n%t*1e7},y=function(e){var t=6,i="";while(--t>=0)if(""!==i||0===t||0!==e[t]){var n=h(e[t]);i=""===i?n:i+f("0",7-n.length)+n}return i},j=l((function(){return"0.000"!==O(8e-5,3)||"1"!==O(.9,0)||"1.25"!==O(1.255,2)||"1000000000000000128"!==O(0xde0b6b3a7640080,0)}))||!l((function(){O({})}));n({target:"Number",proto:!0,forced:j},{toFixed:function(e){var t,i,n,r,a=s(this),c=o(e),l=[0,0,0,0,0,0],u="",O="0";if(c<0||c>20)throw d("Incorrect fraction digits");if(a!=a)return"NaN";if(a<=-1e21||a>=1e21)return h(a);if(a<0&&(u="-",a=-a),a>1e-21)if(t=m(a*v(2,69,1))-69,i=t<0?a*v(2,-t,1):a/v(2,t,1),i*=4503599627370496,t=52-t,t>0){p(l,0,i),n=c;while(n>=7)p(l,1e7,0),n-=7;p(l,v(10,n,1),0),n=t-1;while(n>=23)g(l,1<<23),n-=23;g(l,1<<n),p(l,1,1),g(l,2),O=y(l)}else p(l,0,i),p(l,1<<-t,0),O=y(l)+f("0",c);return c>0?(r=O.length,O=u+(r<=c?"0."+f("0",c-r)+O:b(O,0,r-c)+"."+b(O,r-c))):O=u+O,O}})},d3a6:function(e,t,i){"use strict";i("fd71")},d7e1:function(e,t,i){"use strict";i.r(t);var n=i("7a23"),r=i("f4c8"),a=i.n(r),o=function(e){return Object(n["I"])("data-v-9ea3f532"),e=e(),Object(n["G"])(),e},s=o((function(){return Object(n["i"])("div",{class:"title"},[Object(n["i"])("h1",null,"My special offers"),Object(n["i"])("img",{style:{height:"10rem"},src:a.a})],-1)})),c={style:{"background-color":"#212529",padding:"15px","text-align":"-webkit-center"}},l={class:"container w-100 row row-cols-1 row-cols-sm-1 row-cols-md-4",style:{"justify-content":"space-evenly","align-items":"center"}},d=o((function(){return Object(n["i"])("div",{class:"col-md-2"},[Object(n["i"])("button",{type:"button",class:"btn btn-outline-primary text-nowrap me-2","data-bs-toggle":"modal","data-bs-target":"#OfferModal"}," New offer ")],-1)})),h=o((function(){return Object(n["i"])("div",{class:"col-md-5"},[Object(n["i"])("input",{class:"form-control me-2",type:"search",placeholder:"Search","aria-label":"Search"})],-1)})),u={class:"col-md-5"},f={style:{"margin-top":"5%"}};function b(e,t,i,r,a,o){var b=Object(n["O"])("Datepicker"),O=Object(n["O"])("OffersCard"),v=Object(n["O"])("OfferModal");return Object(n["F"])(),Object(n["h"])(n["a"],null,[Object(n["i"])("div",null,[s,Object(n["i"])("div",c,[Object(n["i"])("div",l,[d,h,Object(n["i"])("div",u,[Object(n["m"])(b,{style:{width:"100%","margin-right":"10px",border:"1px solid white","border-radius":"5px"},dark:"",id:"picker",modelValue:e.date,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.date=t}),placeholder:"Select date",range:"",enableTimePicker:!1},null,8,["modelValue"])])])]),Object(n["i"])("div",f,[(Object(n["F"])(!0),Object(n["h"])(n["a"],null,Object(n["M"])(e.offers,(function(t){return Object(n["F"])(),Object(n["f"])(O,{key:t.offerId,offer:t,entityType:e.entityType},null,8,["offer","entityType"])})),128))])]),Object(n["m"])(v,{id:"OfferModal"})],64)}i("b0c0");var O=function(e){return Object(n["I"])("data-v-4e0ee4e0"),e=e(),Object(n["G"])(),e},v={class:"card mb-3 bg-dark mt-3",style:{width:"65%",margin:"auto","background-color":"#7e000c3d !important"}},m={class:"row g-0"},p={class:"col-md-4 shadow-none"},g=["src"],y={class:"col-md-8 shadow-none",name:"main-col"},j={class:"card-body shadow-none"},w={class:"card-text shadow-none",style:{display:"flex"}},P={class:"card-title shadow-none"},S={class:"discountStatus shadow-none"},x={class:"shadow-none"},R={class:"card-text shadow-none",style:{display:"flex","align-items":"center"}},k={class:"shadow-none",style:{width:"100%"}},D={class:"row shadow-none"},T=O((function(){return Object(n["i"])("p",{class:"card-text text-left shadow-none col-md-4"}," Reservation starts: ",-1)})),A={class:"card-text text-left shadow-none col-md-8"},F={class:"row shadow-none"},I=O((function(){return Object(n["i"])("p",{class:"card-text text-left shadow-none col-md-4"}," Reservation ends: ",-1)})),C={class:"card-text text-left shadow-none col-md-8"},M={class:"row shadow-none"},B=O((function(){return Object(n["i"])("p",{class:"card-text text-left shadow-none col-md-4"}," Offer ends in: ",-1)})),E={class:"card-text text-left shadow-none col-md-8"},N={class:"row shadow-none"},H=O((function(){return Object(n["i"])("p",{class:"card-text text-left shadow-none col-md-4"},"Price:",-1)})),_={class:"card-text text-left shadow-none col-md-8"},L=O((function(){return Object(n["i"])("i",{class:"fas fa-dollar-sign shadow-none",style:{"font-size":"80%"}},null,-1)})),V={key:0,class:"shadow-none"},z={class:"row shadow-none"},U=O((function(){return Object(n["i"])("p",{class:"card-text text-left shadow-none col-md-4"}," Persons: ",-1)})),Y={class:"card-text text-left shadow-none col-md-8"},W={key:0,class:"row shadow-none"},q=O((function(){return Object(n["i"])("p",{class:"card-text text-left shadow-none col-md-4"}," Boat owner present: ",-1)})),G={class:"card-text text-left shadow-none col-md-8"},$={key:0,class:"fas fa-check",style:{color:"gray"}},J={key:1,class:"fas fa-times",style:{color:"gray"}},K=O((function(){return Object(n["i"])("p",{class:"card-text text-left shadow-none"}," Additional services: ",-1)})),Q={class:"row shadow-none",style:{"margin-left":"1%"}},X={key:0,class:"additionalServices shadow-none",style:{"text-align":"center"}},Z=O((function(){return Object(n["i"])("div",{class:"manageReservation shadow-none"},[Object(n["i"])("button",{class:"btn btn-outline-primary shadow-none mb-2","data-bs-toggle":"modal","data-bs-target":"#questionModal"}," Close offer ")],-1)}));function ee(e,t,r,a,o,s){var c=Object(n["O"])("YesNoModal");return Object(n["F"])(),Object(n["h"])(n["a"],null,[Object(n["i"])("div",null,[Object(n["i"])("div",v,[Object(n["i"])("div",m,[Object(n["i"])("div",p,[Object(n["i"])("img",{style:{width:"100%",height:"225px","object-fit":"cover"},src:i("1771")("./"+r.offer.coverImage),class:"img-fluid rounded-start shadow-none"},null,8,g)]),Object(n["i"])("div",y,[Object(n["i"])("div",j,[Object(n["i"])("div",w,[Object(n["i"])("h5",P,Object(n["R"])(r.offer.serviceProfileName),1),Object(n["i"])("p",S,[Object(n["i"])("b",x,Object(n["R"])(r.offer.discount)+"% OFF",1)])]),Object(n["i"])("div",R,[Object(n["i"])("div",k,[Object(n["i"])("div",D,[T,Object(n["i"])("p",A,Object(n["R"])(e.starts),1)]),Object(n["i"])("div",F,[I,Object(n["i"])("p",C,Object(n["R"])(e.ends),1)]),Object(n["i"])("div",M,[B,Object(n["i"])("p",E,Object(n["R"])(e.durationString),1)]),Object(n["i"])("div",N,[H,Object(n["i"])("p",_,[L,Object(n["l"])(Object(n["R"])(r.offer.price)+" ",1),"adventure"!=this.entityType?(Object(n["F"])(),Object(n["h"])("span",V,"/day")):Object(n["g"])("",!0)])]),Object(n["i"])("div",z,[U,Object(n["i"])("p",Y,Object(n["R"])(r.offer.maxPersons),1)]),"boat"==r.entityType?(Object(n["F"])(),Object(n["h"])("div",W,[q,Object(n["i"])("p",G,[r.offer.ownerPresence?(Object(n["F"])(),Object(n["h"])("i",$)):Object(n["g"])("",!0),r.offer.ownerPresence?Object(n["g"])("",!0):(Object(n["F"])(),Object(n["h"])("i",J))])])):Object(n["g"])("",!0),K,Object(n["i"])("div",Q,[0==r.offer.chosenServices.length?(Object(n["F"])(),Object(n["h"])("p",X," Not included ")):Object(n["g"])("",!0),(Object(n["F"])(!0),Object(n["h"])(n["a"],null,Object(n["M"])(r.offer.chosenServices,(function(e){return Object(n["F"])(),Object(n["h"])("p",{class:"additionalServices shadow-none",key:e.id},Object(n["R"])(e.name),1)})),128))])]),Z])])])])])]),Object(n["m"])(c,{question:"Are you sure you want to close this offer?",onAnswer:s.modalAnswer,id:"questionModal"},null,8,["onAnswer"])],64)}var te=i("c1df"),ie=i.n(te),ne=i("bc3a"),re=i.n(ne),ae={class:"modal fade dark",id:"YesNoModal","aria-labelledby":"YesNoModalLabel","aria-hidden":"true","data-bs-backdrop":"static","data-bs-keyboard":"false"},oe={class:"modal-dialog modal-dialog-centered"},se={class:"modal-content",style:{height:"auto"}},ce={class:"modal-body",style:{"text-align":"center",padding:"2rem 0px",color:"white"}},le={class:"modal-footer"};function de(e,t,i,r,a,o){var s=this;return Object(n["F"])(),Object(n["h"])("div",ae,[Object(n["i"])("div",oe,[Object(n["i"])("div",se,[Object(n["i"])("div",ce,[Object(n["i"])("h2",null,Object(n["R"])(i.question),1)]),Object(n["i"])("div",le,[Object(n["i"])("button",{type:"button",style:{width:"4rem"},class:"btn btn-outline-primary",onClick:t[0]||(t[0]=function(e){return s.$emit("answer","yes")}),"data-bs-dismiss":"modal"}," Yes "),Object(n["i"])("button",{type:"button",style:{width:"4rem"},class:"btn btn-outline-primary",onClick:t[1]||(t[1]=function(e){return s.$emit("answer","no")}),"data-bs-dismiss":"modal"}," No ")])])])])}var he={components:{},name:"YesNoModal",props:["question"]},ue=(i("51df"),i("6b0d")),fe=i.n(ue);const be=fe()(he,[["render",de],["__scopeId","data-v-3c4c65ec"]]);var Oe=be;re.a.defaults.baseURL="/";var ve={props:["offer","entityType"],components:{YesNoModal:Oe},data:function(){return{date:"12/20/2021 - 12/25/2021",discount:"50",duration:"",ends:"",starts:"",durationString:""}},mounted:function(){this.ends=new Date(this.offer.endDate),this.starts=new Date(this.offer.startDate);var e=this.offer.dateCreated+this.offer.duration;this.ends=ie()(this.ends).format("MM/DD/yyyy HH:mm"),this.starts=ie()(this.starts).format("MM/DD/yyyy HH:mm");var t=e-new Date,i=t/864e5;i=parseInt(i,10);var n=t/36e5-24*i;n=parseInt(n,10);var r=t/6e4-24*i*60-60*n;r=parseInt(r,10),this.durationString=i+"d "+n+"h "+r+"m"},methods:{modalAnswer:function(e){"yes"==e&&this.closeOffer()},closeOffer:function(){re.a.delete("/appointment/"+this.offer.offerId+"/"+this.offer.serviceProfileId,{headers:{"Access-Control-Allow-Origin":"/",Authorization:"Bearer "+localStorage.refreshToken}}).then((function(){window.location.reload()}))}}};i("4a59");const me=fe()(ve,[["render",ee],["__scopeId","data-v-4e0ee4e0"]]);var pe=me,ge=function(e){return Object(n["I"])("data-v-672ef11f"),e=e(),Object(n["G"])(),e},ye={class:"modal-dialog modal-dialog-centered"},je={class:"modal-content",id:"modalContent"},we={class:"modal-header"},Pe=ge((function(){return Object(n["i"])("h3",null,"New offer",-1)})),Se=ge((function(){return Object(n["i"])("i",{class:"fas fa-times fa-lg"},null,-1)})),xe=[Se],Re={class:"modal-body"},ke={class:"discountStatus shadow-none"},De={class:"shadow-none"},Te={class:"element"},Ae={style:{color:"white"}},Fe=ge((function(){return Object(n["i"])("option",{value:""},null,-1)})),Ie=["value"],Ce=ge((function(){return Object(n["i"])("h6",{style:{color:"white",margin:"5% 0"}}," Offer will be active until: ",-1)})),Me={key:0},Be=ge((function(){return Object(n["i"])("h6",{style:{color:"white",margin:"5% 0"}},"Reservation dates:",-1)})),Ee={key:1},Ne=ge((function(){return Object(n["i"])("h6",{style:{color:"white",margin:"5% 0"}},"Reservation date:",-1)})),He=ge((function(){return Object(n["i"])("h6",{style:{color:"white",margin:"5% 0"}}," Select additional services: ",-1)})),_e={id:"table-wrapper",style:{"margin-top":"-5%"}},Le={id:"table-scroll"},Ve={class:"table"},ze={key:0,style:{color:"white"}},Ue={style:{color:"white"}},Ye={style:{color:"white"}},We=["id","onClick"],qe={class:"input-group",style:{"margin-top":"1rem"}},Ge=ge((function(){return Object(n["i"])("span",{class:"input-group-text",style:{width:"5rem"}},"Persons:",-1)})),$e=["max"],Je={class:"input-group",style:{"margin-top":"1rem"}},Ke=ge((function(){return Object(n["i"])("span",{class:"input-group-text",style:{width:"5rem"}},"Price:",-1)})),Qe=["max"],Xe={key:2,class:"input-group",style:{"margin-top":"1rem"}},Ze=ge((function(){return Object(n["i"])("span",{class:"input-group-text",style:{width:"9rem"}},"Owner presence:",-1)})),et={class:"form-control",style:{display:"flex","justify-content":"space-around",padding:"0"}},tt={style:{color:"red","margin-top":"1rem"}},it={key:3,style:{color:"red"}},nt=ge((function(){return Object(n["i"])("b",null,"(Check availability dates)",-1)})),rt=[nt],at={class:"modal-footer steps-div"};function ot(e,t,i,r,a,o){var s=Object(n["O"])("Datepicker");return Object(n["F"])(),Object(n["h"])("div",{class:"modal fade dark",id:"OfferModal","aria-labelledby":"OfferModalLabel","aria-hidden":"true","data-bs-backdrop":"static","data-bs-keyboard":"false",onShow:t[11]||(t[11]=function(){return o.closeModal&&o.closeModal.apply(o,arguments)})},[Object(n["i"])("div",ye,[Object(n["i"])("div",je,[Object(n["i"])("div",we,[Pe,Object(n["i"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal",onClick:t[0]||(t[0]=function(){return o.closeModal&&o.closeModal.apply(o,arguments)})},xe)]),Object(n["i"])("div",Re,[Object(n["i"])("p",ke,[Object(n["i"])("b",De,Object(n["R"])(e.discount)+"% OFF",1)]),Object(n["i"])("div",Te,[Object(n["i"])("h6",Ae,"Select "+Object(n["R"])(e.entityType),1),Object(n["i"])("select",{id:"selectEl",onChange:t[1]||(t[1]=function(){return o.changeSelect&&o.changeSelect.apply(o,arguments)})},[Fe,(Object(n["F"])(!0),Object(n["h"])(n["a"],null,Object(n["M"])(e.selectData,(function(e){return Object(n["F"])(),Object(n["h"])("option",{value:e.label,key:e.code},Object(n["R"])(e.label),9,Ie)})),128))],32)]),Ce,Object(n["m"])(s,{style:{width:"100%","margin-right":"10px",border:"1px solid white","border-radius":"5px"},dark:"",placeholder:"Select date..",modelValue:e.offerEndDate,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.offerEndDate=t}),enableTimePicker:!0,minDate:new Date},null,8,["modelValue","minDate"]),"adventure"!=e.entityType?(Object(n["F"])(),Object(n["h"])("span",Me,[Be,Object(n["m"])(s,{style:{width:"100%","margin-right":"10px",border:"1px solid white","border-radius":"5px"},dark:"",id:"picker",modelValue:e.dateRange,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.dateRange=t}),onClosed:o.dateRangeChanged,placeholder:"Select dates..",range:"",enableTimePicker:!0,minDate:new Date},null,8,["modelValue","onClosed","minDate"])])):Object(n["g"])("",!0),"adventure"==e.entityType?(Object(n["F"])(),Object(n["h"])("span",Ee,[Ne,Object(n["m"])(s,{style:{width:"100%","margin-right":"10px",border:"1px solid white","border-radius":"5px"},dark:"",modelValue:e.adventureReservationDate,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.adventureReservationDate=t}),onClosed:o.dateRangeChanged,placeholder:"Select date..",enableTimePicker:!0,minDate:new Date},null,8,["modelValue","onClosed","minDate"])])):Object(n["g"])("",!0),He,Object(n["i"])("div",_e,[Object(n["i"])("div",Le,[Object(n["i"])("table",Ve,[Object(n["i"])("tbody",null,[void 0!=e.additionalServices&&e.additionalServices.length?Object(n["g"])("",!0):(Object(n["F"])(),Object(n["h"])("tr",ze," No additional services available ")),(Object(n["F"])(!0),Object(n["h"])(n["a"],null,Object(n["M"])(e.additionalServices,(function(e){return Object(n["F"])(),Object(n["h"])("tr",{key:e.id},[Object(n["i"])("td",null,[Object(n["i"])("label",Ue,Object(n["R"])(e.name),1)]),Object(n["i"])("td",null,[Object(n["i"])("label",Ye,Object(n["R"])(e.price)+" $",1)]),Object(n["i"])("td",null,[Object(n["i"])("input",{id:e.id,type:"checkbox",onClick:function(t){return o.check(e)}},null,8,We)])])})),128))])])])]),Object(n["i"])("div",qe,[Ge,Object(n["ab"])(Object(n["i"])("input",{type:"number","onUpdate:modelValue":t[5]||(t[5]=function(t){return e.persons=t}),max:e.maxPersons,min:"1",class:"form-control"},null,8,$e),[[n["W"],e.persons]])]),Object(n["i"])("div",Je,[Ke,Object(n["ab"])(Object(n["i"])("input",{type:"number","onUpdate:modelValue":t[6]||(t[6]=function(t){return e.priceField=t}),max:e.originalTotalPrice,min:"0",class:"form-control",onChange:t[7]||(t[7]=function(){return o.recalculatePrice&&o.recalculatePrice.apply(o,arguments)})},null,40,Qe),[[n["W"],e.priceField]])]),"boat"==e.entityType?(Object(n["F"])(),Object(n["h"])("div",Xe,[Ze,Object(n["i"])("div",et,[Object(n["i"])("div",{class:"ownerPresence",onClick:t[8]||(t[8]=function(){return o.changeOwnerPresence&&o.changeOwnerPresence.apply(o,arguments)}),id:"yesOwnerPresence"}," YES "),Object(n["i"])("div",{class:"ownerPresence",onClick:t[9]||(t[9]=function(){return o.changeOwnerPresence&&o.changeOwnerPresence.apply(o,arguments)}),id:"noOwnerPresence"}," NO ")])])):Object(n["g"])("",!0),Object(n["i"])("h6",tt,[Object(n["i"])("b",null,Object(n["R"])(e.error),1)]),"Chosen date is not available."==e.error?(Object(n["F"])(),Object(n["h"])("h6",it,rt)):Object(n["g"])("",!0)]),Object(n["i"])("div",at,[Object(n["i"])("button",{type:"button",class:"btn btn-outline-primary",onClick:t[10]||(t[10]=function(){return o.createOffer&&o.createOffer.apply(o,arguments)})}," Create ")])])])],32)}i("caad"),i("2532"),i("a434"),i("b680");re.a.defaults.baseURL="/";var st={components:{},name:"OfferModal",data:function(){return{available:!1,serviceProfileId:"",persons:1,maxPersons:"",priceField:"",originalPricePerDay:"",selectData:"",entityType:"",discount:0,additionalServices:[],dateRange:[],chosenServices:[],error:"",offerEndDate:void 0,originalTotalPrice:"",priceForPeriod:0,priceForServices:0,adventureReservationDate:void 0,adventureDurationInMins:[],ownerPresence:!1}},mounted:function(){var e=this;re.a.get("/users/getRole",{headers:{"Access-Control-Allow-Origin":"/",Authorization:"Bearer "+localStorage.refreshToken}}).then((function(t){var i=t.data;document.getElementById("modalContent").style="height: 48rem","ROLE_VACATION_HOME_OWNER"==i?(e.entityType="cottage",e.getServiceProfileByHomeOwner()):"ROLE_BOAT_OWNER"==i?(document.getElementById("modalContent").style="height: 53rem",e.entityType="boat",e.getServiceProfileByBoatOwner()):"ROLE_FISHING_INSTRUCTOR"==i?(e.entityType="adventure",e.getServiceProfileByFishingInstructor()):window.location.href="/"}))},methods:{changeSelect:function(){var e=this,t=document.getElementsByTagName("select")[0].value;""!=t?(re.a.get("/serviceProfile/getAdditionalServicesByName/"+t,{headers:{"Access-Control-Allow-Origin":"/",Authorization:"Bearer "+localStorage.refreshToken}}).then((function(t){e.additionalServices=t.data})),re.a.get("/serviceProfile/getServiceInfoForOfferByName/"+t,{headers:{"Access-Control-Allow-Origin":"/",Authorization:"Bearer "+localStorage.refreshToken}}).then((function(t){e.originalPricePerDay=t.data.price,e.maxPersons=t.data.persons,e.serviceProfileId=t.data.serviceProfileId,e.persons>e.maxPersons&&(e.persons=e.maxPersons),"adventure"==e.entityType&&re.a.get("/fishingAdventure/getDurationById/"+e.serviceProfileId,{headers:{"Access-Control-Allow-Origin":"/",Authorization:"Bearer "+localStorage.refreshToken}}).then((function(t){e.adventureDurationInMins=t.data}))}))):(this.serviceProfileId="",this.persons=1,this.maxPersons=1,this.priceField="",this.originalPricePerDay="",this.discount=0,this.additionalServices=[],this.dateRange=[],this.chosenServices=[],this.error="",this.offerEndDate=void 0,this.priceForPeriod=0,this.priceForServices=0,this.available=!1,this.adventureReservationDate=void 0),this.priceForServices=0,this.dateRangeChanged()},dateRangeChanged:function(){if(void 0!=this.dateRange[0]&&void 0!=this.dateRange[1]){var e=this.dateRange[1]-this.dateRange[0],t=e/864e5;t=parseInt(t,10);var i=e/36e5-24*t;i=parseInt(i,10),i>12&&(t+=1),this.priceForPeriod=t*this.originalPricePerDay,this.originalTotalPrice=this.priceForPeriod+this.priceForServices,this.priceField=this.originalTotalPrice,this.recalculatePrice(),this.checkAvailability()}else void 0!=this.adventureReservationDate&&(this.priceForPeriod=this.originalPricePerDay,this.originalTotalPrice=this.priceForPeriod+this.priceForServices,this.priceField=this.originalTotalPrice,this.checkAvailability(),this.recalculatePrice())},checkAvailability:function(){var e=this,t=[],i=[];"adventure"!=this.entityType?(t=this.dateRange[0],i=this.dateRange[1]):(t=this.adventureReservationDate,i=new Date(t.getTime()+6e4*this.adventureDurationInMins)),re.a.get("/serviceProfile/isServiceAvailableForDateRange?id="+this.serviceProfileId+"&start="+ie()(t).format("yyyy-MM-DD HH:mm:ss.SSS")+"&end="+ie()(i).format("yyyy-MM-DD HH:mm:ss.SSS"),{headers:{"Access-Control-Allow-Origin":"/",Authorization:"Bearer "+localStorage.refreshToken}}).then((function(t){t.data?e.ownerPresence?e.checkBoatOwnerAvailability():(e.available=!0,e.error=""):(e.error="Chosen date is not available.",e.available=!1)}))},changeOwnerPresence:function(e){var t=e.target.innerHTML;t.includes("YES")?(document.getElementById("noOwnerPresence").classList.remove("active"),document.getElementById("yesOwnerPresence").classList.add("active"),this.ownerPresence=!0,""!=this.serviceProfileId&&this.checkBoatOwnerAvailability()):(document.getElementById("yesOwnerPresence").classList.remove("active"),document.getElementById("noOwnerPresence").classList.add("active"),this.ownerPresence=!1),this.dateRangeChanged()},check:function(e){var t=document.getElementById(e.id);if(!0===t.checked)this.chosenServices.push(e),this.priceForServices+=e.price;else{var i=this.chosenServices.indexOf(e);this.priceForServices-=e.price,i>-1&&this.chosenServices.splice(i,1)}this.originalTotalPrice=this.priceForPeriod+this.priceForServices,this.priceField=this.originalTotalPrice,this.recalculatePrice()},recalculatePrice:function(){var e=this.dateRange[1]-this.dateRange[0],t=e/864e5;t=parseInt(t,10);var i=e/36e5-24*t;i=parseInt(i,10),i>12&&(t+=1);var n=(100*this.priceField/this.originalTotalPrice).toFixed(2);this.discount=(100-n).toFixed(2),"NaN"==this.discount&&(this.discount=0)},createOffer:function(){if(this.available)if(void 0==this.offerEndDate||void 0==this.dateRange[0]&&"adventure"!=this.entityType||void 0==this.adventureReservationDate&&"adventure"==this.entityType||""==document.getElementsByTagName("select")[0].value)this.error="All fields must be filled.";else{this.error="";var e=[],t=[],i=!0;if("adventure"==this.entityType?(e=this.adventureReservationDate,i=!0,t=new Date(e.getTime()+6e4*this.adventureDurationInMins)):(e=this.dateRange[0],t=this.dateRange[1],i="cottage"==this.entityType||this.ownerPresence),this.offerEndDate>t)this.error="Offer cannot cannot last longer than the chosen reservation.";else{var n=new Date,r=this.offerEndDate-n,a={serviceProfileId:this.serviceProfileId,discount:this.discount,startDate:e,endDate:t,maxPersons:this.persons,price:this.priceField,chosenServices:this.chosenServices,duration:r,ownerPresence:i};re.a.post("/appointment/create",a,{headers:{"Access-Control-Allow-Origin":"/",Authorization:"Bearer "+localStorage.refreshToken}}).then((function(){window.location.reload()}))}}else"boat"!=this.entityType&&(this.error="Chosen date is not available.")},closeModal:function(){document.getElementsByTagName("select")[0].value="",this.persons=1,this.maxPersons=1,this.priceField="",this.originalPricePerDay="",this.entityType="",this.discount=0,this.additionalServices=[],this.dateRange=[],this.chosenServices=[],this.error="",this.priceForPeriod=0,this.priceForServices=0,this.offerEndDate=void 0,this.adventureReservationDate=void 0},getServiceProfileByHomeOwner:function(){var e=this;re.a.get("/vacationHome/getNamesByUser",{headers:{"Access-Control-Allow-Origin":"/",Authorization:"Bearer "+localStorage.refreshToken}}).then((function(t){e.selectData=t.data}))},getServiceProfileByBoatOwner:function(){var e=this;re.a.get("/boat/getNamesByUser",{headers:{"Access-Control-Allow-Origin":"/",Authorization:"Bearer "+localStorage.refreshToken}}).then((function(t){document.getElementById("noOwnerPresence").classList.add("active"),e.selectData=t.data}))},getServiceProfileByFishingInstructor:function(){var e=this;re.a.get("/fishingAdventure/getNamesByUser",{headers:{"Access-Control-Allow-Origin":"/",Authorization:"Bearer "+localStorage.refreshToken}}).then((function(t){e.selectData=t.data}))},checkBoatOwnerAvailability:function(){var e=this;re.a.get("/boatOwner/available/dateRange?id="+this.serviceProfileId+"&start="+ie()(this.dateRange[0]).format("yyyy-MM-DD HH:mm:ss.SSS")+"&end="+ie()(this.dateRange[1]).format("yyyy-MM-DD HH:mm:ss.SSS"),{headers:{"Access-Control-Allow-Origin":"/",Authorization:"Bearer "+localStorage.refreshToken}}).then((function(t){t.data?(e.available=!0,e.error=""):(e.error="Boat owner is not available.",e.available=!1)}))}}};i("fe02");const ct=fe()(st,[["render",ot],["__scopeId","data-v-672ef11f"]]);var lt=ct;re.a.defaults.baseURL="/";var dt={components:{OffersCard:pe,OfferModal:lt},data:function(){return{numberOfPersons:"",date:"",offers:"",entityType:""}},mounted:function(){var e=this;re.a.get("/users/getRole",{headers:{"Access-Control-Allow-Origin":"/",Authorization:"Bearer "+localStorage.refreshToken}}).then((function(t){var i=t.data;e.entityType="ROLE_FISHING_INSTRUCTOR"==i?"adventure":"ROLE_VACATION_HOME_OWNER"==i?"home":"boat",re.a.get("/appointment/getOffersByAdvertiser",{headers:{"Access-Control-Allow-Origin":"/",Authorization:"Bearer "+localStorage.refreshToken}}).then((function(t){e.offers=t.data}))}))},methods:{}};i("d3a6");const ht=fe()(dt,[["render",b],["__scopeId","data-v-9ea3f532"]]);t["default"]=ht},fd71:function(e,t,i){},fe02:function(e,t,i){"use strict";i("4aa5")}}]);
//# sourceMappingURL=chunk-be2d4a14.21b7953c.js.map